generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model entries {
  id           Int      @id @default(autoincrement())
  prize_id     String
  entry_number String
  password     String
  is_winner    Boolean  @default(false)
  created_at   DateTime @default(now()) @db.Timestamptz(6)
  updated_at   DateTime @default(now()) @db.Timestamptz(6)
  prizes       prizes   @relation(fields: [prize_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([prize_id, entry_number], map: "entries_unique_per_prize")
  @@index([prize_id])
}

model prizes {
  id               String    @id
  name             String
  result_time_jst  String
  publish_time_utc DateTime  @db.Timestamptz(6)
  created_at       DateTime  @default(now()) @db.Timestamptz(6)
  updated_at       DateTime  @default(now()) @db.Timestamptz(6)
  entries          entries[]
}
